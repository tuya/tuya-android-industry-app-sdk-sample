本文介绍如何将涂鸦安卓版 **行业 App SDK**集成到您的开发环境中，例如 Android Studio，并介绍初始化方法以及如何启用调试模式。然后，您可以尝试运行 Demo，快速上手行业 App SDK 开发。

## 前提条件

1. 开始操作前，请与PM沟通账号注册和KEY的申请。

## 集成 SDK

- 开始操作前，请确保您已经完成**前提条件**。
- 如果您还未安装 Android Studio，请访问 [安卓官网](https://developer.android.com/studio) 进行下载安装。

### 第一步：创建 Android 工程

1. 在 Android Studio 中新建工程。

2. 将您自己新建工程的密钥文件 `xxx.jks` 拷贝到工程的根目录下。

	:::important
	`xxx.jks` 是您根据PM提供的项目`applicationId`新建项目所生成的密钥文件。
	:::

### 第二步：配置 build.gradle 文件

1. 在安卓项目的 `build.gradle` 文件里，添加 `dependencies` 依赖库。

	```groovy
	android {
		defaultConfig {
			ndk {
				abiFilters "armeabi-v7a", "arm64-v8a"
			}
			packagingOptions {
				pickFirst 'lib/*/libc++_shared.so' // 多个 aar 存在此 so，需要选择第一个
			}
		}

		// 配置项目工程的签名密钥信息
		signingConfigs {
			release {
				storeFile file("../xxx.jks")
				storePassword "xxxx"
				keyAlias "xxxx"
				keyPassword "xxxx"
				v1SigningEnabled true
				v2SigningEnabled true
			}

			debug {
				storeFile file("../xxx.jks")
				storePassword "xxxx"
				keyAlias "xxxx"
				keyPassword "xxxx"
				v1SigningEnabled true
				v2SigningEnabled true
			}
		}
	}

	dependencies {
		implementation 'com.alibaba:fastjson:1.2.32'
		// 行业 App SDK 最新稳定安卓版
		implementation 'com.thingclips.smart:IndustryLinkSDK:2.0.0-beta.1'
    	implementation 'com.squareup.moshi:moshi:1.13.0'
	}
	```

2. 在根目录的 `build.gradle` 文件，中增加涂鸦 IoT Maven 仓库地址，进行仓库配置。

	```groovy
	repositories {
                jcenter()
		mavenCentral()
		google()
		// 涂鸦 IoT 仓库地址
		maven {
		//请联系PM 申请私有源
            url ""
		}
	}
	```

### 第三步：混淆配置

在 `proguard-rules.pro` 文件配置相应混淆配置。

```groovy
#fastJson
-keep class com.alibaba.fastjson.**{*;}
-dontwarn com.alibaba.fastjson.**

#mqtt
-keep class com.tuya.smart.mqttclient.mqttv3.** { *; }
-dontwarn com.tuya.smart.mqttclient.mqttv3.**

#OkHttp3
-keep class okhttp3.** { *; }
-keep interface okhttp3.** { *; }
-dontwarn okhttp3.**

-keep class okio.** { *; }
-dontwarn okio.**

-keep class com.thingclips.**{*;}
-dontwarn com.thingclips.**
```

<a id="bmp&keySetting"></a>


### 第五步：初始化SDK

您需要在 `Application` 中初始化 SDK，确保所有进程都能初始化。示例代码如下：

```java
public class BaseApplication extends Application {

    @Override
    public void onCreate() {
        super.onCreate();
        //初始化
        new IndustryLinkSDK.Builder(this)
                .initialize("clientId","clientSecret")
                .setHost("云项目的Host")
                .setDeviceSDKKey("SDKKey")
                .setDeviceSDKSecret("SDKSecret")
                .setDebugMode(true)
                .build();
    }
}

```

:::important
- 上述代码中的 `clientId`、 `clientSecret` 、`云项目的Host`、`SDKKey` 和 `SDKSecret` 请与PM沟通获取。
- 在 debug 模式下，您可以开启 SDK 的日志开关，查看更多的日志信息，帮助您快速定位问题。
- 在 release 模式下，建议关闭日志开关。
:::

## 运行 Demo App

Demo App 演示了行业 App SDK 的开发流程。在开发 App 之前，建议您先按照以下流程完成 Demo App 的操作。

### Demo 介绍

Demo App 提供了设备配网、登录注册、资产管理等基本功能的示例。行业 App SDK 是涂鸦 SaaS 开发框架产品的重要组成部分。更多详情，请参考 [tuya-android-iot-app-sdk-sample](https://github.com/tuya/tuya-android-iot-app-sdk-sample) GitHub 项目。

Demo App 实现了以下功能：

- 用户管理：账号登录、登出
- 资产管理：资产查询、选择
- 设备配网：Wi-Fi 热点配网、Wi-Fi 快连配网、有线配网、Zigbee 子设备配网、扫码配网、NB-IoT 扫码配网
- 设备管理：设备查询、设备解绑

	<img src="https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/162443855370a008a89d3.png" width="250">

### 运行 Demo

1. 根据您自建工程签名文件中的信息，在工程的 `build.gradle` 里配置 `signingConfigs`，`storeFile` 字段用来指定 `xxx.jks` 的存储位置。

	![image.png](https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/16474114699aef5417291.png)

2. 替换程序包名称。如下所示，包名称必须和**PM提供的配置**保持一致。

	![image.png](https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/16474114456ebd43b9ace.png)

3. Application 中，将 PM提供的`clientId`、 `clientSecret` 、`云项目的Host`、`SDKKey` 和 `SDKSecret` 粘贴到代码对应位置，如下图所示。

	![image.png](https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/16854138931da6aa8743c.png)

4. 运行 Demo。
